# HTTP 报文
如果说 HTTP 是因特网的信使，那么 HTTP 报文就是它用来搬东西的包裹。

## 报文流
- HTTP 使用术语流入（inbound）和流出（outbound）来描述事务处理（transaction）的方向。报文流入源端服务器，工作完成之后，会流回用户的 Agent 代理中。

## 报文的组成部分
- HTTP 报文是简单的格式化数据块。它们由三部分组成：对报文进行描述的起始行（start line）、包含属性的首部（header）块、以及可选的包含数据的主体（body）部分。
- 起步行和首部就是由行分隔的 ASCII 文本。每行都以一个 由两个字符组成的行终止序列作为结束，其中包括一个回车符（ASCII 码 13）和一个换行符（ASCII 码 10）。这个行终止序列可以写作 CRLF。
- 主体可以包含文本或二进制数据。
- 报文的语法
    - 请求报文的格式 `<method><request-URL><version> CRLF <headers> CRLF <entity-body>`
    - 响应报文的格式 `<version><status><reason-phrase> CRLF <headers> CRLF <entity-body>`
- 报文的组成部分
    - 方法（method）：客户端希望服务器对资源执行的动作。
    - 请求 URL（request-URL）：命名了所请求资源，或者 URL 路径组件的完整 URL；
    - 版本（version）：报文所使用的 HTTP 版本，其格式看起来是这样的：`HTTP/<major>.<minor>`；
    - 状态码（status-code）：这三位数字描述了请求过程中所发生的情况；
    - 原因短语（reason-phrase）：数字状态码的可读版本，包含行终止序列之前的所有文本；
    - 首部（header）：可以有零个或多个首部，每个首部都包含一个名字，后面跟着一个冒号（：），然后是一个可选的空格，接着是一个值，最后是一个 CRLF。
    - 实体的主体部分（body）：实体的主体部分包含一个由任意数据组成的数据块。
- 常用的 HTTP 方法
    - GET：从服务器获取一份文档；
    - HEAD：自从服务器获取文档的首部；主要用于判断数据是否存在，获取数据的描述信息；
    - POST：向服务器发送要处理的数据；
    - PUT：将请求的主体部分存储在服务器上；
    - TRACE：对可能经过处理服务器传送到服务器上去的报文进行追踪；主要用于诊断；
    - OPTIONS：决定可以在服务器上执行哪些方法；
    - DELETE：从服务器上删除一份文档；
- 状态码的分类
    - 100~199：信息提示；其中 100~101 已定义；
    - 200~299：成功；其中 200~206 已定义；
    - 300~399：重定向；其中 300~305 已定义；
    - 400~499：客户端错误；其中 400~415 已定义；
    - 500~599：服务端错误；其中 500~505 已定义；
- 首部分类
    - 通用首部：既可以出现在请求报文中，也可以出现在响应报文中；
    - 请求首部：提供更多有关请求的信息；
    - 响应首部：提供更多有关响应的信息；
    - 实体首部：描述主体的长度和内容，或者资源本身；
    - 扩展首部：规范中没有定义的新首部； 

## 首部

- 通用首部
    - Connection: 允许客户端和服务器指定和请求/响应连接有关的选项；
    - Transfer-Encoding: 报文的编码方式；
    - Update: 给出了发送端可能想要“升级”使用的新版本或者协议；
    - Cache-Control：用于随报文传送缓存指示；
    - Pragma：另一种随报文传送指示的方式，但并不专用于缓存；
- 请求首部
    - Accept: 告诉服务器能够发送哪些媒体类型；
    - Accept-Charset: 告诉服务器能够发送哪些字符集；
    - Accept-Encoding：告诉服务器能够发送哪些编码方式；
    - Accept-Language：告诉服务器能够发送哪些语言；
    - If-Match：如果实体标记与文档当前的标记相匹配，就获取这份文档；
    - If-Modified-Since: 除非在某个指定日期之后资源被修改过，否则就限制这个请求；
    - Authorization：包含了客户端提供给服务器，以便对其自身进行认证的数据；
    - Cookie: 客户端用它向服务器传送一个令牌——它并不是真正的安全首部，但确实隐含了安全功能；
    - Proxy-Connection：与 Connection 首部相同，但这个首部是在于代理建立连接时使用的；
- 响应头部
    - Set-Cookie：不是真正的安全首部，但隐含有安全功能；可以在客户端设置一个令牌，以便服务器对客户端进行标识；
- 实体首部
    - Allow：列出了可以对此实体执行的请求方法；
    - Content-Encoding: 对主体执行的任意编码方式；
    - Content-Length：主体的长度和尺寸；
    - Content-Type: 这个主体的对象类型；
    - ETag: 与此实体相关的实体标记；
    - Expires：实体不再有效，要从原始的源端再次获取此实体的日期和时间；
    - Last-Modified：这个实体最后一次被修改的日期和时间；